{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "planpilot_trip_plan",
  "description": "Output schema for generated trip plans",
  "type": "object",
  "properties": {
    "title": {
      "type": "string",
      "description": "Descriptive name for the trip",
      "examples": ["5-Day Paris Adventure", "Sri Lanka Honeymoon 2025"]
    },
    "arrival_location": {
      "type": "string",
      "description": "Starting point or arrival location for the trip (e.g., 'London Heathrow Airport', 'New York City', 'Paris CDG'). Leave empty string if not specified.",
      "examples": ["London Heathrow Airport", "New York City", ""]
    },
    "departure_location": {
      "type": "string",
      "description": "Ending point or departure location for the trip (e.g., 'Rome Fiumicino Airport', 'Barcelona', 'Sydney'). Leave empty string if not specified.",
      "examples": ["Rome Fiumicino Airport", "Barcelona", ""]
    },
    "locations": {
      "type": "array",
      "description": "Array of all locations in the trip",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for this location"
          },
          "type": {
            "type": "string",
            "enum": ["key-location", "accommodation", "attraction"],
            "description": "Type of location: key-location (purple), accommodation (green), or attraction (red)"
          },
          "name": {
            "type": "string",
            "description": "Display name of the location"
          },
          "description": {
            "type": "string",
            "description": "Additional details or notes about the location"
          },
          "price": {
            "type": "string",
            "description": "Cost information (e.g., '$150/night', '€17 entry', 'Free') or empty string"
          },
          "link": {
            "type": "string",
            "description": "URL for booking or information, or empty string"
          },
          "lat": {
            "type": "number",
            "description": "Latitude coordinate (must be number, not string)",
            "minimum": -90,
            "maximum": 90
          },
          "lng": {
            "type": "number",
            "description": "Longitude coordinate (must be number, not string)",
            "minimum": -180,
            "maximum": 180
          },
          "order": {
            "type": "number",
            "description": "Sequence order for visiting this location (1, 2, 3, etc.). Lower numbers are visited first."
          },
          "duration": {
            "type": "string",
            "description": "Recommended stay duration (e.g., '3 days', '2 nights', '4 hours', '1 day'). Use empty string if not applicable."
          },
          "keyLocationId": {
            "type": "string",
            "description": "For accommodation/attraction types: the ID of the key-location this item belongs to. This explicitly associates hotels and attractions with their parent key location. Use empty string for key-location types."
          }
        },
        "required": ["id", "type", "name", "description", "price", "link", "lat", "lng", "order", "duration", "keyLocationId"],
        "additionalProperties": false
      },
      "minItems": 1
    },
    "connections": {
      "type": "array",
      "description": "Array of connections between key locations (travel routes)",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier, typically 'fromId-toId'"
          },
          "from": {
            "type": "string",
            "description": "ID of the starting key-location"
          },
          "to": {
            "type": "string",
            "description": "ID of the destination key-location"
          }
        },
        "required": ["id", "from", "to"],
        "additionalProperties": false
      }
    }
  },
  "required": ["title", "arrival_location", "departure_location", "locations", "connections"],
  "additionalProperties": false,
  "examples": [
    {
      "title": "5-Day Paris Art & Food Tour",
      "arrival_location": "London Heathrow Airport",
      "departure_location": "Paris Charles de Gaulle Airport",
      "locations": [
        {
          "id": "1",
          "type": "key-location",
          "name": "Paris",
          "description": "City of Light",
          "price": "",
          "link": "",
          "lat": 48.8566,
          "lng": 2.3522,
          "order": 1,
          "duration": "5 days",
          "keyLocationId": ""
        },
        {
          "id": "2",
          "type": "accommodation",
          "name": "Hotel Atmospheres",
          "description": "Boutique hotel in Le Marais",
          "price": "$180/night",
          "link": "https://www.booking.com/hotel/fr/atmospheres.html",
          "lat": 48.8584,
          "lng": 2.3615,
          "order": 2,
          "duration": "5 nights",
          "keyLocationId": "1"
        },
        {
          "id": "3",
          "type": "attraction",
          "name": "Louvre Museum",
          "description": "World's largest art museum",
          "price": "€17 entry",
          "link": "https://www.louvre.fr",
          "lat": 48.8606,
          "lng": 2.3376,
          "order": 3,
          "duration": "3 hours",
          "keyLocationId": "1"
        }
      ],
      "connections": []
    }
  ]
}

